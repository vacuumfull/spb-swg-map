<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <title>SPMAP</title>
    <style>
        body{
            
        }
        canvas {
            background-color: #63b9f7;
            image-rendering: -moz-crisp-edges; /* Firefox */ 
            image-rendering: -webkit-crisp-edges; /* Webkit (Safari) */ 
            image-rendering: pixelated;
        }
    </style>

</head>
<body>

<canvas id="canvas" width="1700" height="1400" style="border:1px solid #000000;">
</canvas>
<script>
    let canvas = document.getElementById('canvas')
    var context = canvas.getContext("2d");
    let ctx = canvas.getContext('2d');
    const width = 1700;
    const height = 1400;
    const pixelRatio = window.devicePixelRatio || 1;

    var scale = 1;
    var originx = 0;
    var originy = 0;


    function draw(){

        ctx.strokeStyle = '#dad5d5';
        ctx.lineWidth = 1;
        ctx.fillStyle = '#dad5d5'
        
        let north = new Path2D("M 0 145 L 40 155 50 155 60 160 70 167 70 195 80 200 94 201 100 190" +
            "L 96 190 90 195 80 194 78 178 100 180 103 170 115 182 120 175 140 180 145 175 165 175" +
            "L 168 179 181 181 190 150 180 140 195 135 C 195 135 225 180 230 220 C 230 220 280 230 300 250" +
            "C 300 250 350 250 363 228 L 387 225 C 387 225 395 210 400 223 C 400 223 406 200  412 225" +
            "C 412 225 430 220 430 242 L 452 239 C 452 239 460 220 508 223 L 509 219 L 535 217 L 541 214 L 580 210" +
            "C 580 210 620 216 655 214 C 655 214 670 230 700 225 L 780 202 C 780 202 810 195 840 203" +
            "C 840 203 880 225 920 230 C 920 230 960 240 995 280 C 995 280 1020 310 1030 340 C 1030 340 1045 380 1045 460" +
            "C 1045 460 1050 520 1080 526 C 1080 526 1110 545 1184 545 C 1184 545 1220 545 1260 519 C 1260 519 1280 500 1291 480" +
            "C 1291 480 1300 468 1320 471 C 1320 471 1380 470 1407 500 C 1407 500 1430 520 1428 540" +
            "C 1428 540 1430 590 1415 630 C 1415 630 1412 635 1415 655 C 1415 655 1415 720 1385 780" +
            "C 1385 780 1375 800 1395 840 C 1395 840 1420 880 1450 920 C 1450 920 1465 950 1480 980" +
            "C 1480 980 1570 1050 1620 1120 C 1620 1120 1660 1180 1665 1300 L 1661 1400 L 1700 1400" +
            "L 1700 0 L 0 0 L 0 145 F");
        ctx.stroke(north);
        ctx.fill(north);

        let vasilievskiy = new Path2D("M 568 902 L 600 920 C 600 920 605 915 610 924 C 610 924 610 910 640 910" +
            "C 640 910 655 880 660 840 C 660 840 670 800 700 770 C 700 770 740 725 760 730 C 760 730 770 730 780 724" +
            "L 860 676 C 860 676 878 670 880 640 C 880 640 880 625 860 625 L 800 620 C 800 620 770 620 722 580" +
            "C 722 580 700 570 690 573 C 690 573 695 568 680 553 C 680 553 650 520 600 495 C 600 495 580 487 560 484" +
            "C 560 484 490 490 480 460 C 480 460 460 430 420 435 C 420 435 380 440 345 460 C 345 460 340 478 325 472" +
            "C 325 472 300 520 300 540 C 300 540 300 550 315 550 L 305 560 C 305 560 280 560 275 550" +
            "C 275 550 240 550 200 524 C 200 524 185 530 190 545 L 253 565 230 645 168 625 C 168 625 155 630 160 645" +
            "C 160 645 180 650 188 675 C 188 675 205 660 220 683 L 220 675 C 220 675 255 680 260 720" +
            "C 260 720 275 750 260 770 C 260 770 245 785 260 793 C 260 793 265 785 280 790 C 280 790 278 780 285 765" +
            "C 285 765 290 760 330 768 C 330 768 325 790 350 790 L 350 770 360 770 C 360 770 365 800 400 810 " +
            "C 400 810 410 800 432 810 C 432 810 440 805 440 790 L 460 802 C 460 802 490 818 460 840" +
            "C 460 840 490 850 500 860 C 500 860 515 875 540 880 C 540 880 558 887 568 902 F");

        ctx.stroke(vasilievskiy);
        ctx.fill(vasilievskiy);

        let petrogradka = new Path2D("M 820 600 C 820 600 803 607 767 580 C 767 580 750 560 720 547" +
            "C 720 547 700 540 680 520 C 680 520 650 485 620 480 C 620 480 570 470 560 462 C 560 462 520 445 480 420" +
            "C 480 420 465 405 485 395 C 489 395 465 405 489 420 C 489 420 496 403 495 395" +
            "C 495 395 511 407 515 406 C 515 406 525 402 535 414 C 535 414 545 420 555 411 C 555 411 570 424 635 425" +
            "C 635 425 635 410 700 410 C 700 410 720 410 736 380 L 740 360 C 740 360 740 330 777 323" +
            "C 777 323 800 320 840 280 C 840 280 860 260 900 255 C 900 255 950 252 965 280 C 965 280 1005 320 1018 380" +
            "L 1028 420 C 1028 420 1032 440 1030 480 C 1030 480 1033 500 1043 520 C 1043 520 1050 527 1040 530 " +
            "L 977 560 C 977 560 965 540 940 543 C 940 543 927 540 900 555 C 900 555 880 570 860 600 " +
            "C 860 600 856 602 820 600 F")

        ctx.stroke(petrogradka);
        
        ctx.fill(petrogradka);

        let center = new Path2D("M 1140 572 L 1180 574 C 1180 574 1220 570 1260 540 L 1300 510" +
            "C 1300 510 1320 495 1340 507 L 1378 540 C 1378 540 1400 570 1390 600 C 1390 600 1380 640 1378 680" +
            "C 1378 680 1375 710 1353 740 C 1353 740 1342 750 1335 800 C 1335 800 1330 815 1338 840" +
            "C 1338 840 1340 870 1377 900 C 1377 900 1385 905 1377 910 C 1377 910 1403 925 1408 940" +
            "C 1408 940 1405 950 1415 960 C 1415 960 1423 980 1440 1000 C 1440 1000 1460 1020 1494 1040" +
            "C 1494 1040 1520 1060 1540 1080 C 1540 1080 1560 1100 1577 1120 C 1577 1120 1590 1140 1600 1160" +
            "C 1600 1160 1614 1190 1620 1220 C 1620 1220 1626 1260 1632 1300 L 1634 1400 L 40 1400 " +
            "C 40 1400 100 1370 100 1320 C 100 1320 120 1320 125 1300 L 105 1280 C 105 1280 85 1265 114 1275" +
            "L 165 1300 C 165 1300 170 1330 200 1340 C 200 1340 215 1335 223 1320 C 223 1320 220 1303 200 1303" +
            "C 200 1303 185 1293 205 1290 C 205 1290 240 1285 280 1270 C 280 1270 320 1310 355 1360" +
            "C 355 1360 375 1350 395 1335 C 395 1335 390 1320 374 1305 C 374 1305 385 1290 360 1265" +
            "C 365 1263 390 1300 400 1320 C 400 1320 420 1320 420 1310 C 420 1310 418 1300 436 1310" +
            "C 436 1310 440 1315 480 1285 C 480 1285 527 1260 520 1200 C 520 1200 525 1160 540 1140" +
            "L 580 1100 C 580 1100 605 1070 610 1040 C 610 1040 625 1020 630 952 C 630 952 670 956 640 942" +
            "L 650 918 L 705 937 L 705 930 L 662 915 C 662 915 680 890 680 860 C 680 860 682 830 700 805" +
            "C 700 805 715 780 743 778 C 743 778 782 770 840 720 L 950 640 C 950 640 980 620 1060 585" +
            "C 1060 585 1110 570 1140 572");

        ctx.stroke(center);
        ctx.fill(center);

        ctx.strokeStyle = 'white';
        ctx.lineWidth = 2;
        let nevskiy = new Path2D("M 1340 855 L 1315 868 1200 790 900 717 C 900 717 915 708 900 698 L 870 660")
        ctx.stroke(nevskiy);

        ctx.strokeStyle = '#dad5d5';
        ctx.lineWidth = 1;
        ctx.fillStyle = '#dad5d5'

        let krepost = new Path2D("M 900 597 L 920 598 C 920 597 945 600 938 580 L 945 578" +
            "C 945 578 949 582 960 575 C 960 575 967 570 960 565 C 960 565 970 558 960 550" +
            "C 960 550 950 545 940 547 C 940 547 920 547 900 560 C 900 560 890 570 886 580" +
            "C 886 580 880 590 900 597 F")

        ctx.stroke(krepost);
        ctx.fillStyle = '#f7dc92'
        ctx.fill(krepost);


        let krestovskiy = new Path2D("M 780 302 L 760 312 C 760 312 742 325 737 312 C 737 312 715 280 700 288" +
        "C 700 288 675 277 700 248 C 700 248 730 230 760 222 C 760 222 800 205 835 220 " +
        "L 860 232 C 860 232 885 240 860 250 C 860 250 805 270 780 302 F")
        ctx.stroke(krestovskiy)
        ctx.fillStyle = '#60ef71'
        ctx.fill(krestovskiy)

        let divoiland = new Path2D("M 717 300 L 737 316 C 737 316 745 320 737 331 C 737 331 730 340 728 367" + 
        "C 728 367 720 405 688 401 C 688 401 650 403 620 400 C 620 400 580 388 560 390 C 560 390 540 384 525 385" + 
        "C 525 385 518 395 510 382 C 510 382 507 390 490 376 C 490 376 485 378 467 365 C 467 365 455 380 445 365" + 
        "L 425 360 L 425 365 L 412 358 412 367 395 365 395 355 C 395 355 385 345 375 357 C 375 357 365 380 355 350" + 
        "C 355 350 342 363 336 330 C 336 330 340 300 357 280 C 357 280 370 265 400 272 L 415 274" +
        "C 415 274 425 255 455 272 C 455 272 440 258 462 252 C 462 252 498 252 520 268 C 520 268 570 297 600 300" +
        "L 615 300  C 615 300 620 297 645 307 C 645 307 660 308 672 290 C 672 290 680 278 696 290 L 717 300 F")
        ctx.stroke(divoiland)
        ctx.fillStyle = '#60ef71'
        ctx.fill(divoiland)



        let cpko = new Path2D("M 560 220 C 560 220 590 216 620 218 L 640 220 C 640 220 660 220 680 230" + 
        "C 680 230 705 234 680 255 L 660 285 C 660 285 650 303 640 292 C 640 292 623 284 600 282" + 
        "C 600 282 580 285 560 268 C 560 268 550 252 530 252 C 530 252 522 252 515 243 L 500 243" + 
        "C 500 243 470 235 500 230 L 560 220 F")
        ctx.stroke(cpko)
        ctx.fillStyle = '#60ef71'
        ctx.fill(cpko)



    }


    canvas.onmousewheel = function (event) {
        var mousex = event.clientX - canvas.offsetLeft;
        var mousey = event.clientY - canvas.offsetTop;
        var wheel = event.wheelDelta / 1200;//n or -n

        scale = event.delataY > 0 ? scale + wheel : scale - wheel;

        if (scale < 2.5 && scale > 0.4 ) {
            canvas.width = scale * width * pixelRatio;
            canvas.height = scale * height * pixelRatio;
            canvas.style.width = `${scale * width}px`;
            canvas.style.height = `${scale * height}px`;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.scale(scale * pixelRatio, scale * pixelRatio);
            draw()
        }

    }

    function drawNet(ctx, max, step){
        let rng = range(max, step)
        for (var i = 0; i < rng.length; i++){
            drawVertical(ctx, rng[i], max)
            drawHorizontal(ctx, rng[i], max)
        }
    }
    function drawVertical(ctx, current, max){    
        ctx.lineWidth = 1;
        ctx.strokeStyle = "grey";
        ctx.moveTo(current, 0);
        ctx.lineTo(current, max);
        ctx.stroke();
        ctx.font = "8px Arial";
        ctx.strokeText(current, current+2, 10);
    }
    function drawHorizontal(ctx, current, max){  
        ctx.lineWidth = 1;
        ctx.strokeStyle = "grey";
        ctx.moveTo(0, current);
        ctx.lineTo(max, current);
        ctx.stroke();
        ctx.font = "8px Arial";
        ctx.strokeText(current, 2, current+10);
    }

    function range(size, step = 10) {
        return [...Array(size/step).keys()].map(i => i * step);
    }
   
    draw()
    drawNet(context, 1700, 20)
    let mouseDownX = 0
    let mouseDownY = 0
    let offsetX = 0
    let offsetY = 0

    canvas.onmousedown = function(event){
        if (canvas.width > window.innerWidth || canvas.height > window.innerHeight){
            mouseDownX = event.clientX
            mouseDownY = event.clientY
        }
    }
    canvas.onmouseup = function(event){
        let deltaX = Math.abs(mouseDownX - event.clientX)
        let deltaY = Math.abs(mouseDownY - event.clientY)
        if (deltaX > deltaY){
            offsetX = event.clientX < mouseDownX ? deltaX + offsetX : deltaX > offsetX ? 0 : deltaX
            window.scroll(offsetX, window.scrollY)
        } else {
            offsetY = event.clientY < mouseDownY ? deltaY + offsetY : deltaY > offsetY ? 0 : deltaY
            window.scroll(window.scrollX, offsetY)
        }
    }
</script>

</body>
</html>